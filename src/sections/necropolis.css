/* ──────────────────────────────────────────────
   The Necropolis — Fantasy Map Styles
   Parchment aesthetic with sepia tones on dark bg
   ────────────────────────────────────────────── */

.section--necropolis {
  display: flex;
  align-items: center;
  justify-content: center;
}

.necropolis__container {
  width: 100%;
  max-width: 960px;
  padding: var(--space-4);
  text-align: center;
}

.necropolis__title {
  font-family: 'Cinzel', serif;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: var(--color-accent);
}

.necropolis__subtitle {
  font-size: var(--text-base);
  color: var(--color-text-secondary);
  font-style: italic;
  margin-bottom: var(--space-5);
  max-width: 500px;
  margin-left: auto;
  margin-right: auto;
}

/* ── Viewport (map container) ── */
.necropolis__viewport {
  position: relative;
  background: #1a1e24;
  border: 1px solid var(--color-stone);
  border-radius: 8px;
  overflow: hidden;
  margin-bottom: var(--space-4);
  /* Inner shadow for inset aged feel */
  box-shadow:
    inset 0 2px 12px rgba(0, 0, 0, 0.4),
    0 2px 8px rgba(0, 0, 0, 0.3);
}

.necropolis__svg {
  width: 100%;
  height: auto;
  max-height: 500px;
  display: block;
  user-select: none;
  touch-action: none;
  cursor: grab;
  background: linear-gradient(
    135deg,
    #2a3038 0%,
    #1a1e24 40%,
    #1e2228 100%
  );
}

.necropolis__svg:active {
  cursor: grabbing;
}

/* ── Zoom controls ── */
.necropolis__controls {
  position: absolute;
  top: var(--space-3);
  right: var(--space-3);
  display: flex;
  gap: var(--space-2);
  z-index: 2;
  padding: var(--space-2);
  background: rgba(10, 10, 14, 0.8);
  border: 1px solid var(--color-stone);
  border-radius: 8px;
  backdrop-filter: blur(6px);
}

.necropolis__control {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--text-lg);
  font-family: var(--font-body);
  color: var(--color-text-secondary);
  background: var(--color-bg-surface);
  border: 1px solid var(--color-stone);
  border-radius: 4px;
  cursor: pointer;
  transition:
    background-color var(--duration-fast),
    border-color var(--duration-fast),
    color var(--duration-fast);
}

.necropolis__control:hover {
  background: var(--color-bg-raised);
  border-color: var(--color-stone-light);
  color: var(--color-text-primary);
}

.necropolis__control--reset {
  font-size: var(--text-base);
}

/* ── Continent & regions ── */
.necropolis__continent {
  transition: opacity var(--duration-mid);
}

.necropolis__region {
  cursor: pointer;
  transition: filter var(--duration-fast) var(--ease-out);
}

.necropolis__region--empty {
  cursor: default;
  pointer-events: none;
}

.necropolis__region--hover path {
  stroke-width: 2;
}

/* ── Labels ── */
.necropolis__label {
  pointer-events: all;
  cursor: pointer;
}

.necropolis__label--empty {
  pointer-events: none;
}

.necropolis__label-text {
  font-family: 'Cinzel', serif;
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  paint-order: stroke fill;
  stroke: rgba(244, 232, 193, 0.6);
  stroke-width: 2.5px;
  stroke-linejoin: round;
}

.necropolis__label-count {
  font-family: 'Inter', sans-serif;
  font-size: 7px;
  letter-spacing: 0.04em;
}

/* ── Tooltip ── */
.necropolis__tooltip-fo {
  pointer-events: none;
  overflow: visible;
}

.necropolis__tooltip {
  background: var(--color-bg-surface);
  border: 1px solid var(--color-accent-dim);
  border-radius: 6px;
  padding: var(--space-3);
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
  animation: necro-tooltip-fade var(--duration-fast) var(--ease-out);
}

@keyframes necro-tooltip-fade {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.necropolis__tooltip-name {
  font-family: var(--font-heading);
  font-size: var(--text-sm);
  color: var(--color-accent);
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.necropolis__tooltip-desc {
  font-size: var(--text-xs);
  color: var(--color-text-secondary);
  font-style: italic;
}

.necropolis__tooltip-count {
  font-size: var(--text-xs);
  color: var(--color-text-primary);
  font-weight: 600;
  margin-top: var(--space-1);
}

.necropolis__tooltip-domains {
  display: flex;
  flex-direction: column;
  gap: 2px;
  margin-top: var(--space-1);
}

.necropolis__tooltip-domain {
  font-size: 10px;
  color: var(--color-text-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ── Compass rose ── */
.necropolis__compass {
  pointer-events: none;
}

/* ── Cartouche (title banner on map) ── */
.necropolis__cartouche {
  pointer-events: none;
}

/* ── Legend (below map) ── */
.necropolis__legend {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: var(--space-2) var(--space-4);
  margin-top: var(--space-3);
}

.necropolis__legend-item {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-size: var(--text-xs);
  color: var(--color-text-muted);
  cursor: pointer;
  padding: var(--space-1) var(--space-2);
  border-radius: 4px;
  transition:
    color var(--duration-fast),
    background-color var(--duration-fast);
}

.necropolis__legend-item:hover,
.necropolis__legend-item--active {
  color: var(--color-text-primary);
  background: var(--color-bg-raised);
}

.necropolis__legend-swatch {
  width: 10px;
  height: 10px;
  border-radius: 2px;
  border: 1px solid rgba(60, 36, 21, 0.4);
  flex-shrink: 0;
}

.necropolis__legend-name {
  font-family: var(--font-heading);
  font-size: 10px;
  letter-spacing: 0.06em;
  text-transform: uppercase;
}

.necropolis__legend-count {
  font-family: var(--font-body);
  font-size: 10px;
  color: var(--color-accent-dim);
  font-weight: 600;
}

/* ── Edge decorations ── */
.necropolis__edges {
  pointer-events: none;
}

/* ── Motion preferences ── */
@media (prefers-reduced-motion: reduce) {
  .necropolis__region,
  .necropolis__control {
    transition: none;
  }

  .necropolis__tooltip {
    animation: none;
  }
}

/* ── Responsive ── */
@media (max-width: 768px) {
  .necropolis__container {
    padding: var(--space-3);
  }

  .necropolis__svg {
    max-height: 350px;
  }

  .necropolis__legend {
    gap: var(--space-1) var(--space-3);
  }

  .necropolis__legend-name {
    font-size: 9px;
  }
}
